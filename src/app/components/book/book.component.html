<div class="book-viewport paper-texture">
  <button
    type="button"
    class="fixed top-4 right-4 z-50 px-2 py-1 rounded text-xs font-typewriter bg-[#4B3621] text-[#F5F5DC] hover:bg-[#6b5344]"
    (click)="showAdmin.set(!showAdmin())"
  >
    {{ showAdmin() ? 'Hide Admin' : 'Admin' }}
  </button>
  @if (showAdmin()) {
    <app-admin />
  }

  @if (!isMobile()) {
    <aside class="fixed left-4 top-1/2 -translate-y-1/2 z-10">
      <app-timeline />
    </aside>
  }

  @if (isMobile()) {
    <h1 class="font-heading text-[#4B3621] text-2xl font-bold text-center mb-3">Gabriel & Ana</h1>
  }

  <div
    class="book-scaler"
    [style.width.px]="bookDesignWidth()"
    [style.height.px]="bookHeight"
    [style.transform]="'scale(' + bookScale() + ')'"
    [style.margin-bottom.px]="scaledMarginBottom()"
    (touchstart)="onTouchStart($event)"
    (touchend)="onTouchEnd($event)"
  >
    @if (adventureService.isCoverPage()) {
      <div class="book-page paper-texture page flex items-center justify-center p-6">
        <app-book-cover />
      </div>
    } @else if (isMobile()) {
      <div class="book-page paper-texture page">
        <div class="page-inner">
          <app-adventure-page />
          <div class="page-number font-typewriter">
            {{ adventureService.currentPage()?.pageNumber }}
          </div>
        </div>
      </div>
    } @else {
      <div class="book-spread-inner">
        <div class="book-page left-page paper-texture page">
          <div class="page-inner">
            <app-adventure-page />
            <div class="page-number font-typewriter">
              {{ adventureService.currentPage()?.pageNumber }}
            </div>
          </div>
        </div>
        <div class="book-spine" aria-hidden="true"></div>
        <div class="book-page right-page paper-texture page flex items-center justify-center">
          <div class="next-spread-label font-typewriter text-[#6b5344] text-sm">Next spread</div>
        </div>
      </div>
    }
  </div>

  <div class="book-nav" [class.book-nav--mobile]="isMobile()">
    <button
      type="button"
      class="book-nav-btn font-typewriter"
      [disabled]="!adventureService.hasPrevPage()"
      (click)="goPrev()"
    >
      ← Prev
    </button>
    <button
      type="button"
      class="book-nav-btn font-typewriter"
      [disabled]="!adventureService.hasNextPage()"
      (click)="goNext()"
    >
      Next →
    </button>
  </div>

  @if (isMobile()) {
    <nav class="mobile-timeline-bar">
      <app-timeline [horizontal]="true" />
    </nav>
  }
</div>
