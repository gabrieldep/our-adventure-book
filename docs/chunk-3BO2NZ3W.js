import{Aa as z,Ba as E,Ca as S,Da as y,Ea as d,F as q,Fa as l,Ga as b,Ha as p,I as J,Ia as s,J as h,Ja as C,Ka as ie,La as B,Ma as I,Na as re,O as Q,Oa as f,P as Z,S as ee,Sa as F,Ta as P,Ua as r,Va as w,Wa as _,Ya as v,Z as u,Za as k,a as G,b as K,ea as A,ha as te,ia as i,jb as D,kb as L,ma as ne,ra as x,xa as oe,ya as c,za as m}from"./chunk-FL3CZ5X6.js";var se="/assets/data/adventures.json",le="/assets/data/right-page-texts.json",M=class n{constructor(t){this.http=t;this.loadAdventures(),this.loadRightPageTexts()}dataSignal=u(null);rightPageTextsSignal=u([]);currentPageIndex=u(0);adventures=v(()=>this.dataSignal()?.adventures??[]);pages=v(()=>this.dataSignal()?.pages??[]);currentPage=v(()=>{let t=this.pages(),e=this.currentPageIndex();return e===0?null:t[e-1]??null});currentPageNumber=v(()=>this.currentPageIndex()+1);hasNextPage=v(()=>{let t=this.pages();return this.currentPageIndex()<t.length});hasPrevPage=v(()=>this.currentPageIndex()>0);totalPages=v(()=>1+this.pages().length);totalPagesIndexed=v(()=>{let t=this.totalPages();return Array.from({length:t},(e,o)=>o+1)});isCoverPage=v(()=>this.currentPageIndex()===0);currentRightPageText=v(()=>{let t=this.currentPageIndex();return t===0?null:this.rightPageTextsSignal()[t-1]??null});loadAdventures(){this.http.get(se).subscribe({next:t=>this.dataSignal.set(t),error:()=>this.dataSignal.set({adventures:[],pages:[]})})}loadRightPageTexts(){this.http.get(le).subscribe({next:t=>this.rightPageTextsSignal.set(t?.texts??[]),error:()=>this.rightPageTextsSignal.set([])})}setCurrentPage(t){let e=this.pages(),o=Math.max(0,Math.min(t,e.length));this.currentPageIndex.set(o)}nextPage(){this.hasNextPage()&&this.currentPageIndex.update(t=>t+1)}prevPage(){this.hasPrevPage()&&this.currentPageIndex.update(t=>t-1)}getAdventureById(t){return this.adventures().find(e=>e.id===t)}addAdventure(t,e){this.dataSignal.update(o=>{if(!o)return o;let a=[...o.adventures,t],g=o.pages;if(e){let $=g[g.length-1],N={adventureId:t.id,top:e.top,left:e.left,rotation:e.rotation};$?g=g.map((X,pe)=>pe===g.length-1?K(G({},X),{elements:[...X.elements,N]}):X):g=[...g,{pageNumber:g.length+1,elements:[N]}]}return{adventures:a,pages:g}})}setData(t){this.dataSignal.set(t)}static \u0275fac=function(e){return new(e||n)(J(L))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};function ge(n,t){if(n&1&&C(0,"img",2),n&2){let e=f();B("src",e.imageUrl(),te)("alt",e.caption())}}var H=class n{imageUrl=k.required();caption=k("");rotation=k(0);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-polaroid"]],inputs:{imageUrl:[1,"imageUrl"],caption:[1,"caption"],rotation:[1,"rotation"]},decls:5,vars:12,consts:[[1,"polaroid","inline-block","bg-white","p-3","pb-10","shadow-lg","border","border-white/90"],[1,"overflow-hidden","bg-neutral-100"],[1,"block","w-full","h-auto","object-cover",3,"src","alt"],[1,"polaroid-caption","font-handwriting","text-[#4B3621]","text-center","mt-3","px-1","select-none"]],template:function(e,o){e&1&&(p(0,"div",0)(1,"div",1),c(2,ge,1,2,"img",2),s(),p(3,"p",3),r(4),s()()),e&2&&(P("rotate-1",o.rotation()===1)("-rotate-1",o.rotation()===-1)("rotate-2",o.rotation()===2)("-rotate-2",o.rotation()===-2)("rotate-0",o.rotation()===0),i(2),m(o.imageUrl()?2:-1),i(2),_(" ",o.caption()," "))},styles:[".polaroid[_ngcontent-%COMP%]{max-width:420px;width:100%;box-shadow:0 1px 3px #4b36211f,0 4px 6px #4b362114,0 8px 16px #4b36210f}.polaroid-caption[_ngcontent-%COMP%]{font-size:1.5rem}.font-handwriting[_nghost-%COMP%], .font-handwriting   [_nghost-%COMP%]{font-family:Indie Flower,cursive}@media(max-width:767px){.polaroid[_ngcontent-%COMP%]{max-width:300px}.polaroid-caption[_ngcontent-%COMP%]{font-size:1rem}}"]})};function ce(n,t){n&1&&(p(0,"div",2),r(1," Map loading\u2026 "),s())}function me(n,t){if(n&1&&C(0,"div",3),n&2){let e=f();B("id",e.mapContainerId())}}var R=class n{platformId=h(A);coordinates=k.required();mapContainerId=k("adventure-map");caption=k("");isBrowser=u(!1);mapInstance=null;resizeHandler=null;constructor(){this.isBrowser.set(D(this.platformId))}ngAfterViewInit(){this.isBrowser()&&this.initMap()}ngOnDestroy(){this.isBrowser()&&(this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),window.removeEventListener("orientationchange",this.resizeHandler)),this.mapInstance&&(this.mapInstance.remove(),this.mapInstance=null))}async initMap(){if(!D(this.platformId))return;let t=window.L;if(!t)return;let e=this.coordinates(),o=this.mapContainerId();if(!o||!e)return;let a=t.map(o,{center:[e.lat,e.lng],zoom:10,zoomControl:!1});t.control.zoom({position:"topright"}).addTo(a),t.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap"}).addTo(a);let g=t.divIcon({className:"vintage-marker",html:'<div style="width:16px;height:16px;background:#8B0000;border:2px solid #4B3621;border-radius:50%;"></div>',iconSize:[16,16],iconAnchor:[8,8]});t.marker([e.lat,e.lng],{icon:g}).addTo(a),this.mapInstance=a,this.resizeHandler=()=>{setTimeout(()=>this.mapInstance?.invalidateSize(),200)},window.addEventListener("resize",this.resizeHandler),window.addEventListener("orientationchange",this.resizeHandler)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-adventure-map"]],inputs:{coordinates:[1,"coordinates"],mapContainerId:[1,"mapContainerId"],caption:[1,"caption"]},decls:6,vars:2,consts:[[1,"polaroid","inline-block","bg-white","p-3","pb-10","shadow-lg","border","border-white/90"],[1,"overflow-hidden","bg-neutral-100"],[1,"map-placeholder"],[1,"map-container",3,"id"],[1,"font-handwriting","text-[#4B3621]","text-center","text-base","mt-3","px-1","select-none"]],template:function(e,o){e&1&&(p(0,"div",0)(1,"div",1),c(2,ce,2,0,"div",2)(3,me,1,1,"div",3),s(),p(4,"p",4),r(5),s()()),e&2&&(i(2),m(o.isBrowser()?o.mapContainerId()?3:-1:2),i(3),_(" ",o.caption()," "))},styles:["[_nghost-%COMP%]{display:block;margin:1rem 0}.polaroid[_ngcontent-%COMP%]{max-width:420px;width:100%;box-shadow:0 1px 3px #4b36211f,0 4px 6px #4b362114,0 8px 16px #4b36210f}@media(max-width:767px){.polaroid[_ngcontent-%COMP%]{max-width:300px}}.map-placeholder[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{display:block;width:100%;aspect-ratio:1}.map-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:var(--sepia-mid);color:var(--leather-brown);font-family:var(--font-typewriter);font-size:.875rem}.map-container[_ngcontent-%COMP%]{overflow:hidden}"]})};var ve=(n,t)=>t.adventure.id;function fe(n,t){n&1&&(d(0,"div",1)(1,"h1",4),r(2," Gabriel & Ana. "),l()())}function xe(n,t){if(n&1&&b(0,"app-polaroid",6),n&2){let e=f().$implicit;y("imageUrl",e.adventure.contentUrl||"")("caption",e.adventure.description)("rotation",0)}}function ue(n,t){if(n&1&&(d(0,"div",8),b(1,"app-adventure-map",9),d(2,"p",10),r(3),l()()),n&2){let e=f(2).$implicit;i(),y("coordinates",e.adventure.coordinates)("mapContainerId","map-"+e.adventure.id)("caption",e.adventure.description),i(2),w(e.adventure.title)}}function he(n,t){if(n&1&&c(0,ue,4,4,"div",8),n&2){let e=f().$implicit;m(e.adventure.coordinates?0:-1)}}function be(n,t){if(n&1&&(d(0,"div",7)(1,"strong",11),r(2),l(),d(3,"p",12),r(4),l()()),n&2){let e=f().$implicit;i(2),w(e.adventure.title),i(2),w(e.adventure.description)}}function Ce(n,t){if(n&1&&(d(0,"div",5),c(1,xe,1,3,"app-polaroid",6)(2,he,1,1)(3,be,5,2,"div",7),l()),n&2){let e,o=t.$implicit;F("top",o.layout.top,"%")("left",o.layout.left,"%")("transform","rotate("+o.layout.rotation+"deg)"),i(),m((e=o.adventure.type)==="photo"?1:e==="map"?2:e==="note"?3:-1)}}var j=class n{adventureService=h(M);currentPage=this.adventureService.currentPage;isFirstPage=v(()=>this.currentPage()?.pageNumber===1);elementsWithAdventure=v(()=>{let t=this.currentPage();if(!t)return[];let e=[];for(let o of t.elements){let a=this.adventureService.getAdventureById(o.adventureId);a&&e.push({adventure:a,layout:o})}return e});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-adventure-page"]],decls:5,vars:1,consts:[[1,"adventure-page","relative","w-full","h-full","min-h-[400px]"],[1,"text-center","pt-2","pb-6"],[1,"relative","w-full","flex-1","min-h-[520px]"],[1,"absolute","transform",3,"top","left","transform"],[1,"adventure-title","font-heading","text-2xl","md:text-3xl","lg:text-4xl","font-bold"],[1,"absolute","transform"],[3,"imageUrl","caption","rotation"],[1,"note","max-w-[200px]","p-3","border","rounded","shadow-sm","font-handwriting","text-sm"],[1,"w-full","max-w-[580px]","min-w-[280px]"],[3,"coordinates","mapContainerId","caption"],[1,"adventure-caption","font-handwriting","text-sm","mt-1"],[1,"font-typewriter"],[1,"mt-1"]],template:function(e,o){e&1&&(d(0,"div",0),c(1,fe,3,0,"div",1),d(2,"div",2),E(3,Ce,4,7,"div",3,ve),l()()),e&2&&(i(),m(o.isFirstPage()?1:-1),i(2),S(o.elementsWithAdventure()))},dependencies:[H,R],styles:[".adventure-page[_ngcontent-%COMP%], .adventure-page[_ngcontent-%COMP%]   .adventure-title[_ngcontent-%COMP%], .adventure-page[_ngcontent-%COMP%]   .adventure-caption[_ngcontent-%COMP%], .adventure-page[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{color:var(--leather-brown)}.adventure-page[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{background-color:var(--aged-paper);border-color:#4b36214d}.kraft-inner[_nghost-%COMP%]   .adventure-page[_ngcontent-%COMP%], .kraft-inner   [_nghost-%COMP%]   .adventure-page[_ngcontent-%COMP%]{color:var(--kraft-text)}.kraft-inner[_nghost-%COMP%]   .adventure-title[_ngcontent-%COMP%], .kraft-inner   [_nghost-%COMP%]   .adventure-title[_ngcontent-%COMP%], .kraft-inner[_nghost-%COMP%]   .adventure-caption[_ngcontent-%COMP%], .kraft-inner   [_nghost-%COMP%]   .adventure-caption[_ngcontent-%COMP%], .kraft-inner[_nghost-%COMP%]   .adventure-page[_ngcontent-%COMP%]   .font-handwriting[_ngcontent-%COMP%], .kraft-inner   [_nghost-%COMP%]   .adventure-page[_ngcontent-%COMP%]   .font-handwriting[_ngcontent-%COMP%], .kraft-inner[_nghost-%COMP%]   .note[_ngcontent-%COMP%], .kraft-inner   [_nghost-%COMP%]   .note[_ngcontent-%COMP%]{color:var(--kraft-text);font-size:1.1rem}.kraft-inner[_nghost-%COMP%]   .note[_ngcontent-%COMP%], .kraft-inner   [_nghost-%COMP%]   .note[_ngcontent-%COMP%]{background-color:#f5f5dceb;border-color:#2d1b0d59}"]})};var W=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-book-cover"]],hostAttrs:[1,"block","w-full","h-full","min-w-0","min-h-0","flex-1"],decls:25,vars:0,consts:[[1,"cover-wrapper"],[1,"cover-book"],[1,"cover-spine"],[1,"cover-grommet"],[1,"cover-rope"],[1,"rope-loop","rope-loop-left"],[1,"rope-loop","rope-loop-right"],[1,"rope-end","rope-end-top"],[1,"rope-end","rope-end-bottom"],[1,"cover-front"],[1,"cover-leather"],[1,"cover-frame"],[1,"cover-title"],[1,"title-our"],[1,"title-adventure"],[1,"title-book"],[1,"authors"],["aria-hidden","true",1,"cover-globe"],[1,"globe-inner"],[1,"cover-edge","cover-edge-top"],[1,"cover-edge","cover-edge-right"]],template:function(e,o){e&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),C(3,"div",3),p(4,"div",4),C(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),s()(),p(9,"div",9)(10,"div",10)(11,"div",11)(12,"h2",12)(13,"span",13),r(14,"OUR"),s(),p(15,"span",14),r(16,"ADVENTURE"),s(),p(17,"span",15),r(18,"BOOK"),s()(),p(19,"span",16),r(20,"Por Gabriel e Ana :)"),s(),p(21,"div",17),C(22,"div",18),s()()(),C(23,"div",19)(24,"div",20),s()()())},styles:[".cover-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;min-width:0;min-height:0;perspective:1200px;box-sizing:border-box}.cover-book[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;min-width:0;min-height:0;max-width:100%;max-height:100%;transform:rotateY(-4deg) rotateX(2deg);transform-style:preserve-3d;box-shadow:4px 4px 20px #4b362166,8px 8px 40px #4b362133;box-sizing:border-box}.cover-spine[_ngcontent-%COMP%]{width:7%;min-width:24px;max-width:40px;flex-shrink:0;background:linear-gradient(180deg,#6b2020,#8b0000 15%,#7a2828,#8b0000 85%,#5c1818);border-radius:3px 0 0 3px;position:relative;box-shadow:inset 1px 0 3px #0000004d}.cover-grommet[_ngcontent-%COMP%]{position:absolute;left:50%;top:32%;transform:translate(-50%,-50%);width:10px;height:10px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#4a4a4a,#1a1a1a);box-shadow:inset 0 1px 2px #fff3,0 1px 2px #00000080;z-index:2}.cover-rope[_ngcontent-%COMP%]{position:absolute;left:50%;top:32%;transform:translate(-50%,-50%);width:24px;height:50px;z-index:1}.rope-loop-left[_ngcontent-%COMP%], .rope-loop-right[_ngcontent-%COMP%]{position:absolute;width:12px;height:18px;border:3px solid #a0826d;border-color:#8b7355 #6b5344 #8b7355 #a0826d;border-radius:50%;background:linear-gradient(135deg,#c4a574,#8b7355,#6b5344);box-shadow:inset 0 1px 2px #ffffff4d,1px 1px 2px #0000004d}.rope-loop-left[_ngcontent-%COMP%]{left:-2px;top:8px;transform:rotate(-15deg);border-right-color:transparent}.rope-loop-right[_ngcontent-%COMP%]{right:-2px;top:8px;transform:rotate(15deg);border-left-color:transparent}.rope-end[_ngcontent-%COMP%]{position:absolute;left:50%;width:6px;height:14px;background:linear-gradient(90deg,#6b5344,#8b7355,#6b5344);border-radius:2px;transform:translate(-50%);box-shadow:1px 0 2px #0000004d}.rope-end-top[_ngcontent-%COMP%]{top:-4px;transform:translate(-50%) rotate(-25deg);transform-origin:bottom center}.rope-end-bottom[_ngcontent-%COMP%]{bottom:-4px;transform:translate(-50%) rotate(25deg);transform-origin:top center}.cover-front[_ngcontent-%COMP%]{flex:1 1 auto;position:relative;min-width:0;border-radius:0 4px 4px 0;overflow:hidden}.cover-leather[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#3d2b1a;background-image:repeating-linear-gradient(90deg,transparent 0,transparent 1px,rgba(0,0,0,.03) 1px,rgba(0,0,0,.03) 2px),repeating-linear-gradient(0deg,transparent 0,transparent 1px,rgba(0,0,0,.02) 1px,rgba(0,0,0,.02) 2px);box-shadow:inset 0 0 60px #00000026}.cover-frame[_ngcontent-%COMP%]{position:absolute;inset:14%;border:2px solid #2d1f12;box-shadow:inset 0 0 0 4px #5c4a32,inset 0 0 0 6px #2d1f12;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1rem .5rem 2.5rem}.cover-title[_ngcontent-%COMP%]{font-family:Indie Flower,cursive;font-size:clamp(4.25rem,2.5vw,2.75rem);font-weight:700;text-align:center;line-height:1.35;letter-spacing:.02em;margin:0;text-shadow:1px 1px 0 rgba(0,0,0,.2),-1px -1px 0 rgba(255,255,255,.05)}.title-our[_ngcontent-%COMP%]{display:block;color:#b85c38;transform:rotate(-.5deg)}.title-adventure[_ngcontent-%COMP%]{display:block;color:#7a4040;transform:rotate(.3deg)}.title-book[_ngcontent-%COMP%]{display:block;color:#4a6b5c;transform:rotate(.8deg)}.authors[_ngcontent-%COMP%]{font-family:Indie Flower,cursive;font-size:clamp(1.25rem,2.5vw,2.75rem);display:block;color:#c3c2c2;transform:rotate(.8deg)}.cover-globe[_ngcontent-%COMP%]{position:absolute;bottom:8%;left:50%;transform:translate(-50%);width:12%;height:11%;min-width:40px;min-height:36px;max-width:80px;max-height:72px;border-radius:50%;background:linear-gradient(145deg,#a0826d,#8b7355 30%,#6b5344 70%,#5c4a32);box-shadow:inset 2px 2px 8px #fff3,inset -2px -2px 6px #00000040,2px 4px 8px #0000004d;display:flex;align-items:center;justify-content:center}.globe-inner[_ngcontent-%COMP%]{width:80%;height:80%;border:1px solid rgba(75,54,33,.5);border-radius:50%;background:linear-gradient(90deg,transparent 49%,rgba(75,54,33,.4) 49%,rgba(75,54,33,.4) 51%,transparent 51%),linear-gradient(0deg,transparent 49%,rgba(75,54,33,.35) 49%,rgba(75,54,33,.35) 51%,transparent 51%),linear-gradient(45deg,transparent 48%,rgba(75,54,33,.2) 50%,transparent 52%)}.cover-edge[_ngcontent-%COMP%]{position:absolute;background:linear-gradient(180deg,#d4c4a0,#c4b090);pointer-events:none}.cover-edge-top[_ngcontent-%COMP%]{top:0;left:0;right:0;height:3px;border-radius:0 4px 0 0}.cover-edge-right[_ngcontent-%COMP%]{top:0;right:0;bottom:0;width:4px;border-radius:0 4px 4px 0}"]})};function _e(n,t){n&1&&C(0,"div",3)}function ke(n,t){if(n&1){let e=ie();p(0,"button",1),re("click",function(){let a=Q(e).$implicit,g=f();return Z(g.goToPage(a))}),p(1,"span",2),r(2),s()(),c(3,_e,1,0,"div",3)}if(n&2){let e=t.$implicit,o=t.$index,a=f();P("timeline-knot--active",a.currentPageNumber()===e),oe("aria-current",a.currentPageNumber()===e?"page":null),i(2),_("Page ",e),i(),m(o<a.pageNumbers().length-1?3:-1)}}var U=class n{adventureService=h(M);horizontal=k(!1);pageNumbers=this.adventureService.totalPagesIndexed;currentPageNumber=this.adventureService.currentPageNumber;goToPage(t){this.adventureService.setCurrentPage(t-1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-timeline"]],inputs:{horizontal:[1,"horizontal"]},decls:3,vars:4,consts:[["aria-label","Book pages",1,"timeline"],["type","button",1,"timeline-knot",3,"click"],[1,"sr-only"],["aria-hidden","true",1,"timeline-string"]],template:function(e,o){e&1&&(p(0,"nav",0),E(1,ke,4,5,null,null,z),s()),e&2&&(P("timeline--horizontal",o.horizontal())("timeline--vertical",!o.horizontal()),i(),S(o.pageNumbers()))},styles:[".timeline[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0}.timeline--vertical[_ngcontent-%COMP%]{flex-direction:column;min-height:2rem}.timeline--horizontal[_ngcontent-%COMP%]{flex-direction:row;justify-content:center;overflow-x:auto;scrollbar-width:none;-ms-overflow-style:none}.timeline--horizontal[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.timeline-knot[_ngcontent-%COMP%]{width:1rem;height:1rem;border-radius:50%;border:2px solid var(--leather-brown);background:var(--aged-paper);transition:all .15s;flex-shrink:0;cursor:pointer;padding:0}.timeline-knot[_ngcontent-%COMP%]:hover{transform:scale(1.15)}.timeline-knot[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 0 0 2px var(--vintage-red),0 0 0 4px #8b00004d}.timeline-knot--active[_ngcontent-%COMP%]{background:var(--vintage-red);border-color:var(--vintage-red)}.timeline-string[_ngcontent-%COMP%]{background:#4b362199;flex-shrink:0}.timeline--vertical[_ngcontent-%COMP%]   .timeline-string[_ngcontent-%COMP%]{width:2px;min-height:24px;max-height:2rem}.timeline--horizontal[_ngcontent-%COMP%]   .timeline-string[_ngcontent-%COMP%]{height:2px;min-width:12px;max-width:1.5rem}"]})};function Pe(n,t){if(n&1&&(p(0,"li"),r(1),s()),n&2){let e=t.$implicit;i(),w(e)}}function we(n,t){n&1&&(p(0,"p",3),r(1,"No items yet."),s())}var Me="/assets/data/todo-list.json",V=class n{http=h(L);items=u([]);ngOnInit(){this.http.get(Me).subscribe({next:t=>this.items.set(t?.items??[]),error:()=>this.items.set([])})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-admin"]],decls:7,vars:1,consts:[[1,"admin","fixed","bottom-4","right-4","z-50","w-80","max-h-[90vh]","overflow-auto","rounded-lg","shadow-xl","bg-[#F5F5DC]","border-2","border-[#8B0000]","p-4","font-typewriter","text-sm"],[1,"font-heading","text-[#4B3621]","text-lg","mb-2"],[1,"list-disc","list-inside","text-[#4B3621]","space-y-1"],[1,"text-[#4B3621]/70","italic"]],template:function(e,o){e&1&&(p(0,"div",0)(1,"h2",1),r(2,"To-do list"),s(),p(3,"ul",2),E(4,Pe,2,1,"li",null,z),s(),c(6,we,2,0,"p",3),s()),e&2&&(i(4),S(o.items()),i(2),m(o.items().length===0?6:-1))},encapsulation:2})};function ye(n,t){n&1&&b(0,"app-admin")}function Oe(n,t){n&1&&(d(0,"aside",2),b(1,"app-timeline"),l())}function Ee(n,t){n&1&&(d(0,"h1",3),r(1,"Gabriel & Ana"),l())}function Se(n,t){n&1&&(d(0,"div",10),b(1,"app-book-cover"),l())}function Te(n,t){if(n&1&&(d(0,"div",11)(1,"div",16)(2,"div",17),b(3,"app-adventure-page"),d(4,"div",18),r(5),l()()()()),n&2){let e,o=f();i(5),_(" ",(e=o.adventureService.currentPage())==null?null:e.pageNumber," ")}}function Ie(n,t){n&1&&(d(0,"p",23),r(1),l()),n&2&&(i(),w(t))}function De(n,t){n&1&&(d(0,"div",24),r(1,"Next spread"),l())}function Ne(n,t){if(n&1&&(d(0,"div",12)(1,"div",19)(2,"div",17),b(3,"app-adventure-page"),d(4,"div",18),r(5),l()()(),b(6,"div",20),d(7,"div",21)(8,"div",22),c(9,Ie,2,1,"p",23)(10,De,2,0,"div",24),l()()()),n&2){let e,o,a=f();i(),P("kraft-page--lifting",a.pageLifting()==="left"),i(4),_(" ",(e=a.adventureService.currentPage())==null?null:e.pageNumber," "),i(2),P("kraft-page--lifting",a.pageLifting()==="right"),i(2),m((o=a.adventureService.currentRightPageText())?9:10,o)}}function Ae(n,t){n&1&&(d(0,"nav",15),b(1,"app-timeline",25),l()),n&2&&(i(),y("horizontal",!0))}var ae=700,Y=900,ze=768,Be=50,Fe=1.5,de=class n{adventureService=h(M);platformId=h(A);destroyRef=h(ee);showAdmin=u(!1);bookHeight=Y;pageLifting=u(null);viewportWidth=u(1024);viewportHeight=u(768);isMobile=v(()=>this.viewportWidth()<ze);bookDesignWidth=v(()=>this.adventureService.isCoverPage()||this.isMobile()?ae:ae*2);bookScale=v(()=>{let t=this.viewportWidth(),e=this.viewportHeight(),o=this.isMobile(),a=this.bookDesignWidth(),g=o?32:120,$=o?140:100,N=Math.min((t-g)/a,(e-$)/Y,1);return Math.round(N*1e3)/1e3});scaledMarginBottom=v(()=>(this.bookScale()-1)*Y);touchStartX=0;touchStartY=0;constructor(){ne(()=>{this.syncViewport();let t=()=>this.syncViewport();window.addEventListener("resize",t),window.addEventListener("orientationchange",t),this.destroyRef.onDestroy(()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)})})}syncViewport(){D(this.platformId)&&(this.viewportWidth.set(window.innerWidth),this.viewportHeight.set(window.innerHeight))}goNext(){this.pageLifting.set("right"),this.adventureService.nextPage(),setTimeout(()=>this.pageLifting.set(null),400)}goPrev(){this.pageLifting.set("left"),this.adventureService.prevPage(),setTimeout(()=>this.pageLifting.set(null),400)}onTouchStart(t){this.touchStartX=t.touches[0].clientX,this.touchStartY=t.touches[0].clientY}onTouchEnd(t){let e=t.changedTouches[0].clientX-this.touchStartX,o=t.changedTouches[0].clientY-this.touchStartY;Math.abs(e)>Be&&Math.abs(e)>Math.abs(o)*Fe&&(e<0?this.goNext():this.goPrev())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-book"]],decls:21,vars:18,consts:[[1,"book-viewport"],["type","button",1,"fixed","top-4","right-4","z-50","px-2","py-1","rounded","text-xs","font-typewriter","bg-[#4B3621]","text-[#F5F5DC]","hover:bg-[#6b5344]",3,"click"],[1,"fixed","left-4","top-1/2","-translate-y-1/2","z-10"],[1,"font-heading","text-[#2D1B0D]","text-2xl","font-bold","text-center","mb-3"],[1,"book-scaler",3,"touchstart","touchend"],[1,"book-3d-container"],[1,"book-3d-inner"],[1,"book-outer-leather"],["aria-hidden","true",1,"book-spine","book-spine--left"],["aria-hidden","true",1,"book-spine","book-spine--right"],[1,"book-cover-view"],[1,"book-single-view"],[1,"book-spread-inner"],[1,"book-nav"],["type","button",1,"book-nav-btn","font-typewriter",3,"click","disabled"],[1,"mobile-timeline-bar"],[1,"kraft-page","kraft-page--single"],[1,"page-inner","kraft-inner"],[1,"page-number","font-typewriter"],[1,"kraft-page","kraft-page--left"],["aria-hidden","true",1,"book-crease"],[1,"kraft-page","kraft-page--right","flex","items-center","justify-center"],[1,"right-page-content"],[1,"right-page-poem","font-heading"],[1,"next-spread-label","font-typewriter"],[3,"horizontal"]],template:function(e,o){e&1&&(d(0,"div",0)(1,"button",1),I("click",function(){return o.showAdmin.set(!o.showAdmin())}),r(2),l(),c(3,ye,1,0,"app-admin"),c(4,Oe,2,0,"aside",2),c(5,Ee,2,0,"h1",3),d(6,"div",4),I("touchstart",function(g){return o.onTouchStart(g)})("touchend",function(g){return o.onTouchEnd(g)}),d(7,"div",5)(8,"div",6)(9,"div",7),b(10,"div",8)(11,"div",9),c(12,Se,2,0,"div",10)(13,Te,6,1,"div",11)(14,Ne,11,6,"div",12),l()()()(),d(15,"div",13)(16,"button",14),I("click",function(){return o.goPrev()}),r(17," \u2190 Prev "),l(),d(18,"button",14),I("click",function(){return o.goNext()}),r(19," Next \u2192 "),l()(),c(20,Ae,2,1,"nav",15),l()),e&2&&(i(2),_(" ",o.showAdmin()?"Hide To-do":"To-do"," "),i(),m(o.showAdmin()?3:-1),i(),m(o.isMobile()?-1:4),i(),m(o.isMobile()?5:-1),i(),F("width",o.bookDesignWidth(),"px")("height",o.bookHeight,"px")("transform","scale("+o.bookScale()+")")("margin-bottom",o.scaledMarginBottom(),"px"),i(6),m(o.adventureService.isCoverPage()?12:o.isMobile()?13:14),i(3),P("book-nav--mobile",o.isMobile()),i(),y("disabled",!o.adventureService.hasPrevPage()),i(2),y("disabled",!o.adventureService.hasNextPage()),i(2),m(o.isMobile()?20:-1))},dependencies:[j,W,U,V],styles:['[_nghost-%COMP%]{--leather-cover: #4b3621;--kraft-edge-1: #d2b48c;--kraft-edge-2: #c9a97a;--kraft-edge-3: #c4a484;--kraft-edge-4: #b8956a;--kraft-edge-5: #a67c52;--kraft-edge-6: #9a6b42;--kraft-edge-7: #8b5a2b;--kraft-edge-8: #7a4a1f}.book-viewport[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;min-height:100dvh;position:relative;padding:1rem;overflow-x:hidden}.book-scaler[_ngcontent-%COMP%]{transform-origin:top center;flex-shrink:0;position:relative;touch-action:pan-y}.book-3d-container[_ngcontent-%COMP%]{perspective:1500px;width:100%;height:100%;min-height:100%}.book-3d-inner[_ngcontent-%COMP%]{width:100%;height:100%;min-height:100%;transform:rotateX(5deg);transform-style:preserve-3d;backface-visibility:hidden}.book-outer-leather[_ngcontent-%COMP%]{width:100%;height:100%;min-height:100%;position:relative;background-color:var(--leather-cover);box-shadow:inset 0 0 0 1px #0003,0 0 0 1px #00000026,0 6px 12px #0003,0 16px 32px #00000038,0 28px 56px #00000047,0 44px 88px #0003,0 64px 120px #0000001f,0 96px 160px #00000014;display:flex;align-items:stretch;justify-content:stretch;padding:14px;box-sizing:border-box}.book-spine[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;width:12px;background:linear-gradient(90deg,#3d2b1a,#4b3621 35%,#5a4230,#4b3621 65%,#3d2b1a);box-shadow:inset 0 0 12px #0000004d;pointer-events:none;z-index:0}.book-spine--left[_ngcontent-%COMP%]{left:0;border-radius:6px 0 0 6px;box-shadow:inset 2px 0 8px #00000040,inset 0 0 12px #0003,2px 0 4px #00000026}.book-spine--right[_ngcontent-%COMP%]{right:0;border-radius:0 6px 6px 0;box-shadow:inset -2px 0 8px #00000040,inset 0 0 12px #0003,-2px 0 4px #00000026}.book-cover-view[_ngcontent-%COMP%]{flex:1;display:flex;min-width:0;min-height:0;position:relative;z-index:1}.book-single-view[_ngcontent-%COMP%], .book-spread-inner[_ngcontent-%COMP%]{position:relative;z-index:1}.book-single-view[_ngcontent-%COMP%]{flex:1;display:flex;min-width:0}.book-spread-inner[_ngcontent-%COMP%]{display:flex;flex:1;width:100%;height:100%;min-width:0}.book-crease[_ngcontent-%COMP%]{width:24px;flex-shrink:0;background:linear-gradient(to right,transparent 0%,rgba(0,0,0,.25) 25%,rgba(0,0,0,.5) 40%,rgba(0,0,0,.75) 50%,rgba(0,0,0,.5) 60%,rgba(0,0,0,.25) 75%,transparent 100%);margin:0 -1px;box-shadow:inset 0 0 24px #00000073,inset 0 0 48px #00000040,inset 2px 0 12px #0000004d,inset -2px 0 12px #0000004d}.kraft-page[_ngcontent-%COMP%]{position:relative;overflow:hidden;flex:1;min-width:0;height:100%;background-color:var(--kraft-paper, #c4a484);background-image:radial-gradient(ellipse 120% 100% at 20% 50%,rgba(255,255,255,.06) 0%,transparent 50%),radial-gradient(ellipse 120% 100% at 80% 50%,rgba(255,255,255,.05) 0%,transparent 50%),repeating-linear-gradient(0deg,transparent 0,transparent 1px,rgba(45,27,13,.03) 1px,rgba(45,27,13,.03) 2px),repeating-linear-gradient(90deg,transparent 0,transparent 1px,rgba(45,27,13,.025) 1px,rgba(45,27,13,.025) 2px),linear-gradient(180deg,rgba(255,255,255,.03) 0%,transparent 30%,transparent 70%,rgba(0,0,0,.04) 100%);box-shadow:inset 0 0 0 1px #2d1b0d1f,inset 1px 0 #ffffff0f,inset -1px 0 #0000000f}.kraft-page--left[_ngcontent-%COMP%]:after{content:"";position:absolute;left:-14px;top:0;bottom:0;width:14px;border-radius:4px 0 0 6px;background:repeating-linear-gradient(90deg,var(--kraft-edge-1) 0px,var(--kraft-edge-2) 1px,var(--kraft-edge-3) 2px,var(--kraft-edge-4) 3px,var(--kraft-edge-5) 4px,var(--kraft-edge-6) 5px,var(--kraft-edge-7) 6px,var(--kraft-edge-8) 7px,var(--kraft-edge-1) 8px,var(--kraft-edge-3) 9px,var(--kraft-edge-5) 10px,var(--kraft-edge-7) 11px,var(--kraft-edge-8) 12px,var(--kraft-edge-8) 14px);z-index:-1;pointer-events:none}.kraft-page--left[_ngcontent-%COMP%]{overflow:visible;border-radius:6px 0 0 8px;transform:skewY(-.2deg);transform-origin:left center;box-shadow:inset 0 0 0 1px #2d1b0d1f,inset 1px 0 #ffffff0f,-1px 0 0 var(--kraft-edge-1),-2px 0 0 var(--kraft-edge-2),-3px 0 0 var(--kraft-edge-3),-4px 0 0 var(--kraft-edge-4),-5px 0 0 var(--kraft-edge-5),-6px 0 0 var(--kraft-edge-6),-7px 0 0 var(--kraft-edge-7),-8px 0 0 var(--kraft-edge-8),-3px 0 6px #00000014,-6px 0 12px #0000000d,- 10px 0 20px #00000008}.kraft-page--right[_ngcontent-%COMP%]:after{content:"";position:absolute;right:-14px;top:0;bottom:0;width:14px;border-radius:0 4px 6px 0;background:repeating-linear-gradient(90deg,var(--kraft-edge-1) 0px,var(--kraft-edge-2) 1px,var(--kraft-edge-3) 2px,var(--kraft-edge-4) 3px,var(--kraft-edge-5) 4px,var(--kraft-edge-6) 5px,var(--kraft-edge-7) 6px,var(--kraft-edge-8) 7px,transparent 7px,transparent 8px);z-index:-1;pointer-events:none}.kraft-page--right[_ngcontent-%COMP%]{overflow:visible;border-radius:0 6px 8px 0;transform:skewY(.2deg);transform-origin:right center;box-shadow:inset 0 0 0 1px #2d1b0d1f,inset -1px 0 #0000000f,1px 0 0 var(--kraft-edge-1),2px 0 0 var(--kraft-edge-2),3px 0 0 var(--kraft-edge-3),4px 0 0 var(--kraft-edge-4),5px 0 0 var(--kraft-edge-5),6px 0 0 var(--kraft-edge-6),7px 0 0 var(--kraft-edge-7),8px 0 0 var(--kraft-edge-8),3px 0 6px #00000014,6px 0 12px #0000000d,10px 0 20px #00000008}.kraft-page--single[_ngcontent-%COMP%], .kraft-page--cover[_ngcontent-%COMP%]{border-radius:8px 8px 10px 10px;box-shadow:inset 0 0 0 1px #2d1b0d1f,1px 0 0 var(--kraft-edge-1),2px 0 0 var(--kraft-edge-2),3px 0 0 var(--kraft-edge-3),4px 0 0 var(--kraft-edge-4),5px 0 0 var(--kraft-edge-5),6px 0 0 var(--kraft-edge-6),0 1px 0 var(--kraft-edge-1),0 2px 0 var(--kraft-edge-2),0 3px 0 var(--kraft-edge-3),0 4px 0 var(--kraft-edge-4),-1px 0 0 var(--kraft-edge-1),-2px 0 0 var(--kraft-edge-2),-3px 0 0 var(--kraft-edge-3),0 -1px 0 var(--kraft-edge-1),0 -2px 0 var(--kraft-edge-2),2px 2px 4px #00000014,4px 4px 8px #0000000d,6px 6px 12px #00000008}.kraft-page--left.kraft-page--lifting[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #2d1b0d1f,inset 1px 0 #ffffff0f,-1px 0 0 var(--kraft-edge-1),-2px 0 0 var(--kraft-edge-2),-3px 0 0 var(--kraft-edge-3),-4px 0 0 var(--kraft-edge-4),-5px 0 0 var(--kraft-edge-5),-6px 0 0 var(--kraft-edge-6),-7px 0 0 var(--kraft-edge-7),-8px 0 0 var(--kraft-edge-8),0 6px 12px #0000001f,0 12px 24px #0000001a,0 20px 40px #00000014,0 28px 56px #0000000f;transition:box-shadow .25s ease-out}.kraft-page--right.kraft-page--lifting[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #2d1b0d1f,inset -1px 0 #0000000f,1px 0 0 var(--kraft-edge-1),2px 0 0 var(--kraft-edge-2),3px 0 0 var(--kraft-edge-3),4px 0 0 var(--kraft-edge-4),5px 0 0 var(--kraft-edge-5),6px 0 0 var(--kraft-edge-6),7px 0 0 var(--kraft-edge-7),8px 0 0 var(--kraft-edge-8),0 6px 12px #0000001f,0 12px 24px #0000001a,0 20px 40px #00000014,0 28px 56px #0000000f;transition:box-shadow .25s ease-out}.page-inner[_ngcontent-%COMP%]{padding:1.5rem;height:100%;position:relative;box-sizing:border-box}.kraft-inner[_ngcontent-%COMP%]{color:var(--kraft-text, #2d1b0d)}@media(min-width:768px){.page-inner[_ngcontent-%COMP%]{padding:2rem}}.page-number[_ngcontent-%COMP%]{position:absolute;left:50%;top:95%;transform:translate(-50%,-50%);font-size:4rem;font-weight:700;color:#b85c38}.right-page-content[_ngcontent-%COMP%]{padding:2rem;width:100%;height:100%;display:flex;align-items:center;justify-content:center;box-sizing:border-box}.right-page-poem[_ngcontent-%COMP%]{font-family:var(--font-heading);color:var(--kraft-text, #2d1b0d);font-size:clamp(.95rem,1.8vw,1.15rem);line-height:1.7;white-space:pre-line;text-align:center;max-width:90%;margin:0}.next-spread-label[_ngcontent-%COMP%]{position:absolute;bottom:1rem;left:50%;transform:translate(-50%);color:var(--kraft-text, #2d1b0d);font-size:.875rem;opacity:.85}.book-nav[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1.5rem;z-index:10}.book-nav--mobile[_ngcontent-%COMP%]{position:fixed;bottom:3.5rem;left:50%;transform:translate(-50%);margin-top:0}.book-nav-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:.375rem;background:var(--leather-brown);color:var(--aged-paper);font-size:.75rem;box-shadow:0 2px 4px #4b36214d;transition:background .2s;border:none;cursor:pointer}.book-nav-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--sepia-dark)}.book-nav-btn[_ngcontent-%COMP%]:disabled{opacity:.5;pointer-events:none}@media(min-width:768px){.book-nav-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:.5rem;font-size:.875rem}}.mobile-timeline-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:40;background:#c4a484f7;border-top:1px solid rgba(45,27,13,.2);padding:.5rem 1rem;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}']})};export{de as BookComponent};
